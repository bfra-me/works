# Task: Update Cursor Rule Index and Cross-References

## Task ID: 2025-05-03-04

## Related Plan

[Develop Rules for Missing Critical Cursor Rules](../plans/develop-missing-cursor-rules.md)

## Description

Update the Cursor rule index and establish comprehensive bidirectional cross-references between all Cursor rule files. This task will ensure that all newly developed Cursor rules are properly integrated into the existing rule system, with clear references connecting related concepts across rules.

## Problem Analysis

- New workflow rules need integration into the rule index
- Many rules lack proper bidirectional cross-references
- The rule relationship diagram needs updating
- Reference validity needs verification
- Connections between rules are not always clear

## Acceptance Criteria

- Addition of all new rules to rule index
- Creation of bidirectional cross-references
- Updated rule relationship diagram
- Documentation of rule connections
- Verification of reference validity

## Complexity

Medium

## Estimated Effort

1 day

## Solution Design

1. Manual cross-reference approach:
   - Manually review each rule for connection points
   - Add cross-references based on content analysis
   - Pros: Highly accurate, contextual references
   - Cons: Time-consuming, may miss some connections

2. Automated analysis approach:
   - Use NLP/keyword analysis to identify related concepts
   - Generate suggested cross-references
   - Manually verify and implement
   - Pros: More efficient initial discovery
   - Cons: Requires additional verification

## Implementation

- [x] Audit all rules for cross-reference opportunities
  - [x] Create checklist of all rules
  - [x] Identify related concepts between rules
  - Success criteria: Comprehensive relationship map
  - Dependencies: Access to all rule content

- [x] Create rule-relationship-analysis rule
  - [x] Define standard process for analyzing rule relationships
  - [x] Document relationship types
  - [x] Create templates for AI review requests
  - [x] Update rule index
  - Success criteria: Comprehensive guidance for rule analysis
  - Dependencies: Understanding of existing rule relationships

- [ ] Update rule index
  - [ ] Add entries for all new workflow rules
  - [ ] Ensure metadata is consistent
  - Success criteria: Complete index with all rules
  - Dependencies: Completion of new workflow rules

- [ ] Create bidirectional cross-references
  - [ ] Implement references using proper mdc: syntax
  - [ ] Ensure context for each reference
  - Success criteria: Comprehensive cross-references
  - Dependencies: Relationship map

- [ ] Update rule relationship diagram
  - [ ] Add new workflow rules
  - [ ] Update connections
  - [ ] Ensure diagram reflects current structure
  - Success criteria: Accurate visual representation
  - Dependencies: Updated index and cross-references

- [ ] Verify reference validity
  - [ ] Check all links for correct paths
  - [ ] Ensure proper mdc: syntax throughout
  - [ ] Test navigation between rules
  - Success criteria: All references working correctly
  - Dependencies: Cross-reference implementation

## Assignee

Unassigned

## Notes

This task is a critical integration step that will tie together all the Cursor rules developed in previous phases. Special attention should be paid to ensuring that the relationship diagram accurately reflects the logical connections between Cursor rules. All cross-references must use the proper mdc: syntax as defined in the cursor-rule-cross-references rule.

## Dependencies

- Completion of Phases 2 and 3 workflow rules
- Access to rule index
- Ability to modify all rule files

## Status

### 2025-05-06

In Progress

- What's working: Initial analysis of rule relationships completed, rule-relationship-analysis rule created
- What's not: Bidirectional cross-references not fully implemented
- Blocking issues: None
- Next actions: Apply relationship analysis process to remaining rules, implement cross-references
- Documentation updates needed:
  - [x] Rule index documentation
  - [ ] Cross-reference navigation guide

## History

### 2025-05-03 - Initial Planning

- ü§î Decisions: Focus on bidirectional references to create a coherent knowledge network
- ‚è≠Ô∏è Next: Will enable easier navigation between related rules

## Audit Findings

### Checklist of Rules

- [x] ai-agile-workflow
- [x] anthropic-chain-of-thought
- [x] api-design-standards
- [x] changeset-workflow
- [x] ci-cd-workflow
- [x] code-review-standards
- [x] cursor-rules-creation
- [x] date-consistency-enforcer
- [x] debugging-guide
- [x] dependency-management
- [ ] development-workflow
- [x] eslint-config-usage
- [x] mcp-tools-usage
- [x] memory-management
- [x] monorepo-structure
- [x] prettier-config-usage
- [x] repo-analyzer
- [x] repo-rule-recommender
- [ ] rule-acknowledgement
- [ ] rule-automation-script
- [ ] testing-practices
- [ ] typescript-patterns
- [ ] user-preferences-awareness
- [ ] vibe-tools

### Identified Relationships

*(To be filled in during Step 2: Identify Relationships)*

### ai-agile-workflow

- Relates to: `memory-management` (defines workflow status storage, references automated memory updates upon task completion, relies on its context loading)
- Relates to: `date-consistency-enforcer` (uses its date formatting for task IDs, completion dates, and update timestamps)
- Relates to: `cursor-rules-creation` (mentions updating the rule index as part of task completion for rule-related tasks)
- Relates to: `00-rule-index.mdc` (references updating the index file itself)
- Relates to: `mcp-tools-usage` (mentions using the Sequential Thinking tool/approach)
- Relates to: `anthropic-chain-of-thought` (provides structure for Sequential Thinking)
- Interacts with: `docs/features.md`, `docs/plans/`, `docs/tasks/`, `docs/tasks/done/`, `docs/memory/workflow-status.md`, `docs/memory/architecture.md`, `docs/memory/user-preferences.md`, `docs/memory/domain-knowledge.md`, `docs/templates/feature-template.md`, `docs/templates/plan-template.md`, `docs/templates/task-template.md` (defines/uses these document types and mandates loading specific memory files)

### anthropic-chain-of-thought

- Relates to: `cursor-rules-creation` (provides guidance on structuring prompt content within rules)
- Relates to: `ai-agile-workflow` (provides a structure for the 'Sequential Thinking' it mandates)
- Relates to: `mcp-tools-usage` (provides structure for the `Sequential Thinking` tool/approach)
- Applies to: `.mdc`, `.py`, `.md`, `.ts`, `.txt` files (guides prompt structure within these document types)

### api-design-standards

- Relates to: `typescript-patterns` (mandates TS, defines preferred type usage like `interface` vs `type`)
- Relates to: `changeset-workflow` (defines what constitutes MAJOR/MINOR/PATCH changes based on API compatibility, guiding version bumps)
- Relates to: `code-review-standards` (provides specific criteria for reviewing API design)
- Relates to: `eslint-config-usage` (naming conventions could be enforced by lint rules)
- Relates to: `user-preferences-awareness` (documentation and naming standards preference in `user-preferences.md` align with these API standards)
- Applies to: TypeScript files (`.ts`, `.tsx`, `.d.ts`), `package.json`

### changeset-workflow

- Relates to: `development-workflow` (defines when changesets are needed during development)
- Relates to: `ci-cd-workflow` (describes the automated release process that consumes changesets)
- Relates to: `api-design-standards` (semver bump type depends on API compatibility defined here)
- Relates to: `monorepo-structure` (manages versioning across packages - **bidirectional**)
- Relates to: `scripts/src/clean-changesets.ts` (implements the `pnpm clean-changesets` utility)
- Relates to: `code-review-standards` (changesets are part of PRs - **bidirectional**)
- Interacts with: `.changeset/`, `CHANGELOG.md`, `package.json` (version field), CI workflow files (`.github/workflows/`)

### ci-cd-workflow

- Relates to: `changeset-workflow` (describes how changesets are consumed by the release workflow - **bidirectional**)
- Relates to: `development-workflow` (defines the CI checks that must pass before merging)
- Relates to: `eslint-config-usage` (references `pnpm lint` which uses this config)
- Relates to: `prettier-config-usage` (references `pnpm lint` which uses this config)
- Relates to: `tsconfig` (references `pnpm type-check` which uses this config)
- Relates to: `testing-practices` (references `pnpm test` which follows these practices)
- Relates to: `semantic-release` package (references `release.config.js`)
- Relates to: `debugging-guide` (references troubleshooting steps and links to this guide)
- Interacts with: `.github/workflows/` (defines specific workflow files), `.changeset/` (consumes changesets), `.eslintrc.js` (potential troubleshooting), `tsconfig.json` (potential troubleshooting), `release.config.js` (configures semantic-release), `.github/settings.yml` (branch protection rules), `.github/renovate.json5` (renovate configuration)
- Uses commands: `pnpm lint`, `pnpm type-check`, `pnpm test`, `pnpm build`, `pnpm clean`, `pnpm install --frozen-lockfile`, `pnpm changeset`, `pnpm version-changesets`, `pnpm publish-changesets`

### code-review-standards

- Relates to: `changeset-workflow` (part of the author checklist is to add changesets - **bidirectional**)
- Relates to: `ci-cd-workflow` (PRs must pass CI checks defined there before merging)
- Relates to: `testing-practices` (defines that tests must be written and reviewed)
- Relates to: `development-workflow` (defines a key step in the overall development process)
- Relates to: `eslint-config-usage`, `prettier-config-usage`, `typescript-patterns`, `api-design-standards` (defines the standards that code is reviewed against)
- Relates to: `debugging-guide` (reviewers may check for potential bugs)
- Relates to: `dependency-management` (reviewers may check dependency usage)
- Interacts with: `.github/PULL_REQUEST_TEMPLATE.md` (defines how to use this template), `.github/workflows/` (CI checks defined here are prerequisites)
- References external concepts: Conventional Commits

### cursor-rules-creation

- Defines the core structure, content requirements (`mdc:` syntax, frontmatter, metadata), and creation process for `.mdc` rule files.
- Relates to: `00-rule-index.mdc` (mandates updates to the index - **bidirectional**).
- Relates to: `ai-agile-workflow` (rule creation/updates are tasks within this workflow).
- Relates to: `memory-management` (references supplementary guidance docs in `docs/memory/`).
- Relates to: `user-preferences-awareness` (references user preferences for rule best practices).
- Relates to: `anthropic-chain-of-thought` (guides structuring prompt content within rules).
- Relates to: `rule-automation-script` (guides usage of the associated script).
- Interacts with files: All `.cursor/rules/*.mdc` files, `docs/memory/*`, `docs/templates/*`.
- Uses concepts: Rule Application Types, Frontmatter, Filters, Actions, Metadata, Versioning, Priority, `mdc:` syntax.

### date-consistency-enforcer

- Defines the standard method (MCP tool `mcp_time_get_current_time` preferred, `date +%Y-%m-%d` command fallback) and format (`YYYY-MM-DD`) for retrieving and using dates.
- Applies to: Dates within Memory File Updates (`## Updated:` lines), Task IDs (`YYYY-MM-DD-XX`), Completion Dates, and dates in 'Recent Updates'.
- Relates to: `memory-management` (relies on the required `## Updated:` timestamp format it uses).
- Relates to: `ai-agile-workflow` (defines the date format for Task IDs and Completion Dates used within that workflow).
- Relates to: `mcp-tools-usage` (provides the context and guidelines for using the preferred MCP tool).
- Interacts with files: Files located in `docs/memory/`, `docs/plans/`, `docs/tasks/`, `docs/templates/` directories (with `.md` extension), and `.mdc` files (specifically the rule index `00-rule-index.mdc`).
- Uses tools: `mcp_time_get_current_time` (preferred), `date +%Y-%m-%d` command (fallback).

### debugging-guide

- Provides strategies for debugging TypeScript, runtime, build, and performance issues; defines logging best practices.
- Relates to: `ci-cd-workflow` (troubleshooting CI failures), `testing-practices` (debugging tests), `typescript-patterns` (TS errors), `dependency-management` (dep errors), `code-review-standards` (identifying bugs).
- Interacts with files: `*.ts`, `*.js`, `*.test.ts`, `*.spec.ts`, `*.log`, `package.json`, `tsconfig.json`, `launch.json`.
- Mentions tools: `pnpm`, VS Code Debugger, Node.js Inspector/Profiler, `heapdump`, `console` methods, React/Webpack tools.

### dependency-management

- Guides dependency management using `pnpm` in the monorepo (add, update, workspace protocol, security, conflicts); covers Renovate bot integration.
- Relates to: `monorepo-structure` (**bidirectional**), `ci-cd-workflow` (**bidirectional**), `development-workflow`, `testing-practices`, `debugging-guide`.
- Interacts with files: `package.json`, `pnpm-lock.yaml`, `pnpm-workspace.yaml`, `.github/renovate.json5`, `.changeset/`, `.npmrc`.
- Uses tools: `pnpm` (various commands), Renovate bot.

### eslint-config-usage

- Provides guidelines for installing, configuring, and customizing the `@bfra.me/eslint-config` package.
- Relates to: `prettier-config-usage` (integrates Prettier with ESLint - **bidirectional**).
- Relates to: `testing-practices` (for Vitest integration in ESLint config).
- Relates to: `typescript-patterns` (core TypeScript rules applied by this config - **bidirectional**).
- Relates to: `monorepo-structure` (mentions ESLint usage in monorepo context - **bidirectional**).
- Relates to: `ci-cd-workflow` (linting as part of CI/CD process).
- Relates to: `code-review-standards` (defines standards that ESLint enforces during review).
- Interacts with files: `eslint.config.js`, `eslint.config.ts`, `package.json` (for dependencies), `.eslintignore`.
- Mentions features: TypeScript integration, JSX/React rules, JSON/YAML/Markdown linting, Prettier integration, Vitest support.

### mcp-tools-usage

- Provides guidelines for using tools provided by available Model Context Protocol (MCP) servers.
- Relates to: `memory-management` (defines memory structures updated by KG tools - **bidirectional**).
- Relates to: `user-preferences-awareness` (uses KG tools to access preferences - **bidirectional**).
- Relates to: `repo-analyzer` (can use semantic search tools - **bidirectional**).
- Relates to: `date-consistency-enforcer` (provides context for using `mcp_time_get_current_time` tool).
- Relates to: `ai-agile-workflow` (references Sequential Thinking tool - **bidirectional**).
- Relates to: `anthropic-chain-of-thought` (provides structure for Sequential Thinking - **bidirectional**).
- Relates to: `vibe-tools` (fundamental relationship as `vibe-tools` introduces the CLI tools powered by MCP).
- Interacts with memory files: `docs/memory/user-preferences.md`, `docs/memory/domain-knowledge.md`, `docs/memory/architecture.md`, `docs/memory/workflow-status.md`.
- Uses tool commands like: `mcp_memory_create_entities`, `mcp_memory_create_relations`, `mcp_memory_search_nodes`, `mcp_memory_add_observations`.

### memory-management

- Defines guidelines for creating and maintaining persistent memory files for AI assistants across conversations.
- Relates to: `ai-agile-workflow` (provides comprehensive context retention across conversations - **bidirectional**).
- Relates to: `date-consistency-enforcer` (relies on its date formatting standards for timestamps - **bidirectional**).
- Relates to: `user-preferences-awareness` (leverages user preferences memory file).
- Relates to: `mcp-tools-usage` (explains knowledge graph tools for memory updates - **bidirectional**).
- Relates to: `cursor-rules-creation` (defines `mdc:` linking syntax for cross-references).
- Provides templates for memory files: workflow-status.md, architecture.md, user-preferences.md, domain-knowledge.md.
- Interacts with files: `docs/memory/*.md`, `docs/plans/*.md`, `docs/tasks/**/*.md`, `docs/features.md`.

### monorepo-structure

- Provides guidelines for understanding and navigating the bfra.me/works monorepo architecture.
- Relates to: `dependency-management` (how dependencies are managed within the workspace - **bidirectional**).
- Relates to: `development-workflow` (overall workflow for developing within the monorepo).
- Relates to: `changeset-workflow` (how versioning and releases are handled - **bidirectional**).
- Relates to: `eslint-config-usage` (using the shared ESLint config - **bidirectional**).
- Relates to: `prettier-config-usage` (using the shared Prettier config - **bidirectional**).
- Relates to: `testing-practices` (how testing is handled in the monorepo - **bidirectional**).
- Interacts with packages: `@bfra.me/create` (for scaffolding new packages), core packages in `packages/` directory.
- Interacts with files: `pnpm-workspace.yaml`, root `package.json`, package directory structure.

### prettier-config-usage

- Relates to: `eslint-config-usage` (for integrating Prettier with the shared ESLint configuration)
- Relates to: `monorepo-structure` (using the shared Prettier configuration in the monorepo)
- Relates to: `ci-cd-workflow` (formatting checks as part of CI/CD processes)
- Relates to: `code-review-standards` (Prettier formatting standards in code reviews)
- Relates to: `development-workflow` (standardized formatting in the development process)
- Relates to: `typescript-patterns` (works alongside TypeScript formatting best practices)

### repo-analyzer

- Relates to: `monorepo-structure` (provides specific context for the bfra.me/works monorepo)
- Relates to: `mcp-tools-usage` (explains tools like codebase_search that supplement command-line analysis)
- Relates to: `debugging-guide` (repository analysis is a key part of debugging)
- Relates to: `repo-rule-recommender` (uses repo-analyzer as a foundation for its first step)

### repo-rule-recommender

- Relates to: `repo-analyzer` (provides guidelines for the initial analysis step)
- Relates to: `cursor-rules-creation` (the primary guide for authoring rule content)
- Relates to: `rule-automation-script` (can be used for scaffolding new rules)
- Relates to: `00-rule-index` (used to check for existing rules)
- Relates to: `mcp-tools-usage` (specifically for the Sequential Thinking tool used in analysis)
